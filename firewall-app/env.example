# VESSA Backend Configuration
# Copy this file to .env and update with your actual values

# ==================== Database Configuration ====================
# MySQL database connection settings
DB_USER=vessa
DB_PASSWORD=your_secure_password_here
DB_HOST=localhost
DB_PORT=3306
DB_NAME=vessa

# Full database URL (auto-constructed if not provided)
# DATABASE_URL=mysql+pymysql://user:password@host:port/database

# ==================== Security Configuration ====================
# JWT secret key - MUST be changed in production!
# Generate with: openssl rand -hex 32
JWT_SECRET_KEY=CHANGE_THIS_TO_A_SECURE_RANDOM_STRING_IN_PRODUCTION
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30

# API key configuration
API_KEY_LENGTH=32

# ==================== Redis Configuration ====================
# Redis connection for caching and rate limiting
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
# Full Redis URL (alternative to individual settings)
REDIS_URL=redis://localhost:6379/0

# ==================== Rate Limiting ====================
# Enable or disable rate limiting
RATE_LIMIT_ENABLED=true

# Default rate limits
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_REQUESTS_PER_HOUR=1000

# Stricter limits for authentication endpoints
AUTH_RATE_LIMIT_REQUESTS_PER_MINUTE=5
AUTH_RATE_LIMIT_REQUESTS_PER_HOUR=20

# ==================== Application Settings ====================
# Environment: development, staging, production
ENVIRONMENT=development

# Enable debug mode (disable in production!)
DEBUG=true

# Application host and port
HOST=0.0.0.0
PORT=8000

# Allowed CORS origins (comma-separated)
# In production, specify exact origins instead of wildcards
CORS_ORIGINS=http://localhost:5173,http://localhost:3000,http://127.0.0.1:5173

# ==================== ML Model Configuration ====================
# Path to the absolution ML models
MODEL_PATH=../absolution/src/absolution/Models

# Model inference settings
MODEL_BATCH_SIZE=32
MODEL_MAX_SEQUENCE_LENGTH=512

# ==================== Logging Configuration ====================
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log file path (leave empty to log to console only)
LOG_FILE=logs/vessa.log

# Enable structured JSON logging
JSON_LOGS=false

# ==================== Email Configuration (Optional) ====================
# SMTP settings for email notifications
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_app_password
SMTP_USE_TLS=true
SMTP_FROM_EMAIL=noreply@vessa.io
SMTP_FROM_NAME=VESSA Security

# ==================== Notification Configuration ====================
# WebSocket settings
WS_HEARTBEAT_INTERVAL=30
WS_MAX_CONNECTIONS_PER_USER=3

# ==================== Threat Intelligence ====================
# External threat intelligence APIs (optional)
VIRUSTOTAL_API_KEY=
ABUSEIPDB_API_KEY=

# ==================== Monitoring & Analytics ====================
# Sentry DSN for error tracking (optional)
SENTRY_DSN=

# Application Insights key (optional)
APPINSIGHTS_INSTRUMENTATION_KEY=

# ==================== Feature Flags ====================
# Enable/disable specific features
ENABLE_NOTIFICATIONS=true
ENABLE_WEBSOCKETS=true
ENABLE_THREAT_INTELLIGENCE=true
ENABLE_ML_ANALYSIS=true

# ==================== Performance Settings ====================
# Database connection pool settings
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30

# Request timeout (seconds)
REQUEST_TIMEOUT=30

# Maximum request size (bytes)
MAX_REQUEST_SIZE=10485760

# ==================== Development Settings ====================
# These should be disabled in production

# Enable API documentation
ENABLE_DOCS=true

# Enable API redoc
ENABLE_REDOC=true

# Enable server reload on code changes
RELOAD=true

# Number of workers (for production deployment)
WORKERS=1

# ==================== Security Headers ====================
# Additional security configuration
SECURE_COOKIES=false
HTTPS_ONLY=false
HSTS_MAX_AGE=31536000

# ==================== Backup Configuration ====================
# Database backup settings
BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_PATH=/backups

